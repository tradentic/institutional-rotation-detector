# ============================================================================
# ADVANCED TIER CONFIGURATION
# ============================================================================
# Use case: Institutional asset manager, research team, feature validation
# Monthly cost: ~$1,200-2,000
# Workflows: 20+ full suite
# Features: Everything enabled including experimental microstructure
#
# WARNING: Advanced tier includes UNVALIDATED features (microstructure)
# Recommended use: Research and backtesting, NOT production trading
# See: docs/architecture/DEPLOYMENT_TIERS.md
# See: docs/architecture/FEATURE_VALUE_AUDIT.md (microstructure section)
# ============================================================================

# Deployment Tier
DEPLOYMENT_TIER=advanced

# Feature Flags (Advanced tier - all enabled)
ENABLE_OPTIONS_FLOW=true
ENABLE_FORM4_TRACKING=true
ENABLE_GRAPH_ANALYSIS=true
ENABLE_MICROSTRUCTURE=true           # EXPERIMENTAL - validate before production
ENABLE_RESEARCH_WORKFLOWS=true       # Statistical analysis, ad-hoc testing

# Options Configuration
# 'deep' = All UnusualWhales endpoints including Greeks and GEX
OPTIONS_TIER=deep

# ============================================================================
# REQUIRED CONFIGURATION
# ============================================================================

# Supabase (Database)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# SEC EDGAR Configuration
SEC_USER_AGENT=YourCompany contact@yourcompany.com
EDGAR_BASE=https://www.sec.gov
EDGAR_DATA_API_BASE=https://data.sec.gov

# OpenAI API (for AI-powered analysis)
OPENAI_API_KEY=sk-your-openai-key-here

# UnusualWhales API (for deep options analysis)
# Required: All tiers (Tier 1-3 endpoints)
UNUSUALWHALES_API_KEY=your-unusualwhales-api-key-here

# FINRA API (for microstructure data)
# Get credentials from: https://www.finra.org/finra-data
# Used for: OTC transparency, short interest
FINRA_API_CLIENT=your-finra-client-id
FINRA_API_SECRET=your-finra-client-secret
FINRA_API_BASE=https://api.finra.org
FINRA_TOKEN_URL=https://ews.fip.finra.org/fip/rest/ews/oauth2/access_token?grant_type=client_credentials

# IEX Cloud API (for microstructure data)
# Get API key from: https://iexcloud.io/
# Used for: Matched volume, intraday data
IEX_API_KEY=your-iex-api-key-here

# ============================================================================
# OPTIONAL CONFIGURATION
# ============================================================================

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_ENABLE_CACHING=true

# Temporal Configuration
TEMPORAL_NAMESPACE=default
TEMPORAL_TASK_QUEUE=rotation-detector
TEMPORAL_ADDRESS=localhost:7233

# ETF Tracking
ISHARES_FUNDS=IWB,IWM,IWN,IWC

# Rate Limiting
MAX_RPS_EDGAR=8
QUARTER_BATCH=8

# Microstructure Configuration (Advanced only)
# Enable specific microstructure features
MICROSTRUCTURE_INCLUDE_VPIN=true
MICROSTRUCTURE_INCLUDE_KYLES_LAMBDA=true
MICROSTRUCTURE_INCLUDE_OFFEX_RATIO=true
MICROSTRUCTURE_INCLUDE_FLIP50=true
MICROSTRUCTURE_INCLUDE_SHORT_INTEREST=true

# FINRA OTC Configuration
FINRA_OTC_BASE_URL=https://api.finra.org

# ============================================================================
# ESTIMATED COSTS (Advanced Tier)
# ============================================================================
# Base (from Standard): ~$500-800/mo
# + UnusualWhales Tier 2/3: ~$300/mo (Greeks, GEX, advanced endpoints)
# + FINRA API: ~$100/mo (OTC transparency data)
# + IEX API: ~$150/mo (intraday volume, matched trades)
# + Microstructure compute: ~$200/mo (daily VPIN, Kyle's lambda)
# + Advanced graph: ~$100/mo (cross-community, enrichment)
# SUBTOTAL: ~$1,350/mo
#
# With realistic usage:
# - More workers (3-4 instances): $280-420
# - High-volume options: $400-500
# Realistic range: $1,200-2,000/mo
#
# ============================================================================
# VALIDATION REQUIREMENTS (Before Production Use)
# ============================================================================
# Per FEATURE_VALUE_AUDIT.md, microstructure layer is UNPROVEN alpha.
# Before using in production:
#
# 1. Run parallel deployment:
#    - Worker 1: Standard tier (production)
#    - Worker 2: Advanced tier (research)
#
# 2. Collect 3-6 months of data
#
# 3. Backtest microstructure signals:
#    - Calculate Sharpe ratio for Standard vs. Advanced
#    - Measure ΔSharpe (improvement from microstructure)
#
# 4. Decision criteria:
#    - If ΔSharpe ≥ 0.2 → Promote microstructure to Standard tier
#    - If ΔSharpe < 0.2 → Deprecate microstructure layer
#
# 5. Statistical significance:
#    - t-test, p < 0.05
#    - Minimum 100 signals for each tier
#
# See: docs/architecture/FEATURE_VALUE_AUDIT.md Section 2 (Microstructure)
# ============================================================================
# EXPECTED PERFORMANCE (Advanced Tier)
# ============================================================================
# vs. Standard tier:
# - Hit rate improvement: UNKNOWN (needs validation)
# - Sharpe ratio improvement: UNKNOWN (needs validation)
# - CAR improvement: UNKNOWN (needs validation)
#
# Features under evaluation:
# - VPIN (toxicity): Does toxic flow predict rotation reversals?
# - Kyle's lambda: Does price impact predict rotation magnitude?
# - Flip50: Does off-exchange ratio flip predict rotations?
# - Greeks/GEX: Does gamma exposure enhance options overlay?
#
# Recommendation: Use Advanced tier for RESEARCH ONLY until validated.
